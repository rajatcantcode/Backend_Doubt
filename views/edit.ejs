<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hisaab Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body>
    <!-- Parent Container -->
    <div class="container mx-auto p-12">
      <h2 class="text-gray-500"><%=filename.replace(/\.txt$/, '') %></h2>
      <h1 class="text-2xl mb-4">Create New Hisaab</h1>

      <!-- 1. Input Area for to add product name and price and Add button so that we could add the items to the list -->
      <form
        id="addedItemForm"
        class="mb-4"
        method="post"
        action="/updateFile/<%= filename %>"
      >
        <div class="flex items-center gap-5 bg-gray-100 p-4 rounded-lg w-fit">
          <div class="flex items-center gap-2">
            <label for="product" class="block text-gray-700">Product:</label>
            <input
              type="text"
              id="product"
              name="product"
              class="border rounded p-2 w-[150px] focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>

          <div class="flex items-center gap-2">
            <label for="price" class="block text-gray-700">Price:</label>
            <input
              type="number"
              id="price"
              name="price"
              class="border rounded p-2 w-[150px] focus:outline-none focus:ring-2 focus:ring-blue-500"
              required
            />
          </div>

          <button
            type="submit"
            class="bg-blue-500 text-white rounded p-2 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            Add
          </button>
        </div>

        <!--  -->

        <!-- 2. Ability to delete a product from the list in case of a mistake.
           3.  Display the total price of all added items. -->
        <h2 class="font-mono text-xl mt-4">Added Items</h2>
        <ul id="detailsList" class="list-disc pl-5"></ul>

        <h2 class="font-mono text-xl mt-4">Total Price</h2>
        <div class="w-fit">
          <p id="totalPrice" class="font-mono text-lg text-gray-500">$0.00</p>
        </div>
        <!--  -->

        <!-- 4.Update button to save the updated list to the main file. -->
        <button
          id="updateListButton"
          type="submit"
          class="bg-green-500 text-white rounded p-2 hover:bg-green-600 focus:outline-none"
        >
          Update
        </button>
        <!--  -->

        <!-- 5. Preview section to view all items in the file data. -->
        <div class="container mx-auto">
          <div>
            <div class="flex items-center justify-between gap-5 mt-4 mb-2">
              <h2 class="font-mono text-xl">Preview</h2>
              <!-- 6. Edit button to manually remove items and their prices from the list. -->
              <button
                id="editButton"
                class="bg-red-500 text-white rounded p-2 hover:bg-red-600 focus:outline-none text-xs"
              >
                Edit the File
              </button>
              <button
                id="saveButton"
                class="bg-green-500 text-white rounded p-2 hover:bg-green-600 focus:outline-none text-xs hidden"
              >
                Save
              </button>
            </div>
            <div
              id="editArea"
              class="border border-gray-300 p-4 rounded-lg bg-white"
              contenteditable="false"
            >
              <%= data %>
            </div>
          </div>
        </div>
      </form>
      <!--  -->
    </div>

    <script type="module" src="EditLogic.js"></script>
  </body>
</html>
